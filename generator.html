<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Seeds - Generador Manual de URLs</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #f8f9fa;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            text-align: center;
            margin-bottom: 40px;
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .header h1 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 2.2em;
        }
        
        .workflow {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 20px;
            margin-bottom: 40px;
        }
        
        .step {
            background: white;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            text-align: center;
        }
        
        .step-number {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin: 0 auto 15px;
        }
        
        .step h3 {
            color: #2c3e50;
            margin-bottom: 10px;
        }
        
        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
        }
        
        .input-section, .output-section {
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        
        .section-title {
            color: #2c3e50;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #ecf0f1;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            font-weight: bold;
            margin-bottom: 8px;
            color: #2c3e50;
        }
        
        .form-group input, .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #ecf0f1;
            border-radius: 8px;
            font-family: inherit;
            font-size: 14px;
            transition: border-color 0.3s ease;
        }
        
        .form-group input:focus, .form-group textarea:focus {
            outline: none;
            border-color: #3498db;
        }
        
        .base-url-input {
            background: #f8f9fa;
            border-color: #3498db;
        }
        
        .report-textarea {
            min-height: 300px;
            font-family: inherit;
            font-size: 14px;
        }
        
        .btn {
            padding: 15px 25px;
            border: none;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1.1em;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            width: 100%;
        }
        
        .btn-primary:hover {
            background: linear-gradient(135deg, #2980b9, #27ae60);
            transform: translateY(-2px);
        }
        
        .btn-primary:disabled {
            background: #bdc3c7;
            cursor: not-allowed;
            transform: none;
        }
        
        .btn-secondary {
            background: #f39c12;
            color: white;
            margin-top: 10px;
            width: 100%;
        }
        
        .btn-secondary:hover {
            background: #e67e22;
        }
        
        .report-tabs {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 2px solid #ecf0f1;
        }
        
        .tab {
            padding: 10px 20px;
            cursor: pointer;
            border-bottom: 2px solid transparent;
            transition: all 0.3s ease;
        }
        
        .tab.active {
            border-bottom-color: #3498db;
            color: #3498db;
            font-weight: bold;
        }
        
        .report-content {
            display: none;
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            min-height: 400px;
            border: 2px solid #ecf0f1;
        }
        
        .report-content.active {
            display: block;
        }
        
        .final-url {
            background: #e8f5e8;
            padding: 20px;
            border-radius: 8px;
            border: 2px solid #27ae60;
            margin: 20px 0;
            word-break: break-all;
            font-family: 'Courier New', monospace;
            font-size: 13px;
        }
        
        .copy-btn {
            background: #27ae60;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 5px;
            cursor: pointer;
            margin: 10px 5px 10px 0;
            font-size: 14px;
        }
        
        .copy-btn:hover {
            background: #229954;
        }
        
        .email-template {
            background: white;
            padding: 20px;
            border-radius: 8px;
            border: 1px solid #ddd;
            margin-top: 15px;
            white-space: pre-wrap;
            font-family: inherit;
        }
        
        .warning {
            background: #fff3cd;
            color: #856404;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            border-left: 4px solid #ffc107;
        }
        
        .prompt-section {
            background: #e8f5e8;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 30px;
            border-left: 4px solid #27ae60;
        }
        
        .prompt-section h3 {
            color: #27ae60;
            margin-bottom: 15px;
        }
        
        .prompt-text {
            background: white;
            padding: 15px;
            border-radius: 8px;
            border: 1px solid #ddd;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            max-height: 200px;
            overflow-y: auto;
        }
        
        .success-message {
            background: #d4edda;
            color: #155724;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            border: 1px solid #c3e6cb;
            display: none;
        }
        
        .stars {
            color: #f39c12;
        }
        
        .preview-section ul {
            margin: 10px 0;
            padding-left: 20px;
        }
        
        .preview-section li {
            margin: 5px 0;
        }
        
        .preview-section h3 {
            color: #2c3e50;
            margin: 20px 0 10px 0;
            font-size: 1.1em;
        }
        
        .preview-section h3:first-child {
            margin-top: 0;
        }
        
        .preview-section p {
            margin: 10px 0;
        }
        
        .auto-format-notice {
            background: #e8f5e8;
            color: #27ae60;
            padding: 10px;
            border-radius: 5px;
            font-size: 12px;
            margin-top: 5px;
        }
        
        .preview-section {
            margin-top: 20px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
            border: 2px solid #ecf0f1;
        }
        
        @media (max-width: 1200px) {
            .main-content {
                grid-template-columns: 1fr;
            }
            
            .workflow {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üìù Seeds - Generador Manual de URLs</h1>
            <p>Pega tus reportes A/B generados y obt√©n la URL personalizada para el candidato</p>
        </div>
        
        <div class="prompt-section">
            <h3>ü§ñ Prompt para generar los reportes (√∫salo donde prefieras)</h3>
            <div class="prompt-text" id="promptText">
**Contexto: **A continuaci√≥n te doy el transcript de una entrevista con un candidato. Quiero que me generes dos versiones distintas de reporte de feedback para ese candidato. Ambos deben tener las secciones: resumen general, fortalezas, oportunidades de mejora y sugerencias.

**Versi√≥n A ‚Äì M√°s anal√≠tica y estructurada (con puntuaciones)**
* Saludo personalizado con nombre del candidato.
* Resumen general claro y profesional del perfil.
* Evaluaci√≥n por dimensiones con puntuaciones (1 a 5 estrellas) en aspectos como: claridad en la comunicaci√≥n, profundidad en la experiencia, explicaci√≥n de logros e impacto, ingl√©s conversacional, orientaci√≥n a datos, colaboraci√≥n con equipos.
* Listado de fortalezas claras y espec√≠ficas.
* Listado de oportunidades de mejora.
* Sugerencias pr√°cticas y accionables para potenciar esas √°reas.
* Cierre cordial mencionando que es feedback generado autom√°ticamente.

**Versi√≥n B ‚Äì M√°s humana y acompa√±ante (sin puntuaciones)**
* Saludo c√°lido y motivador con nombre del candidato.
* Resumen general positivo y cercano del perfil.
* Fortalezas destacadas expresadas de forma sencilla y motivadora.
* Oportunidades de mejora expresadas con tono emp√°tico y constructivo.
* Sugerencias pr√°cticas para el crecimiento personal y profesional, sin presionar.
* Cierre positivo deseando √©xito y agradeciendo.

**Indicaciones para ambos reportes:**
* No uses texto literal del transcript, sino que hagas un resumen interpretativo y personalizado.
* Mant√©n la coherencia del estilo y tono en cada versi√≥n.
* Si el nombre del candidato no aparece expl√≠cito, us√° "Candidato".
* S√© claro, concreto y √∫til para el desarrollo profesional del candidato.

**Transcript (formato JSON):**
[PEGAR AQU√ç EL TRANSCRIPT]

**Devuelveme:**
1. Versi√≥n A: reporte anal√≠tico con secciones y puntuaciones.
2. Versi√≥n B: reporte humano y motivador con secciones sin puntuaciones.
            </div>
            <button class="copy-btn" onclick="copyPrompt()">üìã Copiar Prompt</button>
        </div>
        
        <div class="workflow">
            <div class="step">
                <div class="step-number">1</div>
                <h3>Copia el Prompt</h3>
                <p>√ösalo en Claude, ChatGPT, o donde prefieras</p>
            </div>
            <div class="step">
                <div class="step-number">2</div>
                <h3>Pega los Reportes</h3>
                <p>Copia y pega ambas versiones aqu√≠</p>
            </div>
            <div class="step">
                <div class="step-number">3</div>
                <h3>Obt√©n la URL</h3>
                <p>Link personalizado listo para enviar</p>
            </div>
        </div>
        
        <div class="main-content">
            <div class="input-section">
                <h2 class="section-title">
                    üìù Input - Datos del Candidato
                </h2>
                
                <div class="warning">
                    <strong>‚ö†Ô∏è Configuraci√≥n inicial:</strong> Primero configura tu URL base donde est√° hosteada la p√°gina de feedback.
                </div>
                
                <div class="form-group">
                    <label for="baseUrl">üåê URL Base de tu p√°gina de feedback:</label>
                    <input type="url" id="baseUrl" class="base-url-input" placeholder="https://tu-usuario.github.io/seeds-feedback" value="https://tu-usuario.github.io/seeds-feedback">
                </div>
                
                <div class="form-group">
                    <label for="candidateName">üë§ Nombre del Candidato:</label>
                    <input type="text" id="candidateName" placeholder="Ej: Mar√≠a Garc√≠a">
                </div>
                
                <div class="form-group">
                    <label for="reportA">üìä Reporte A (Anal√≠tico) - Texto Plano:</label>
                    <textarea id="reportA" class="report-textarea" placeholder="Pega aqu√≠ el texto plano del Reporte A. Se convertir√° autom√°ticamente a HTML bonito.

Ejemplo:
Hola Mar√≠a,

A continuaci√≥n te compartimos el feedback de tu entrevista...

Resumen General:
Tu perfil muestra una s√≥lida experiencia...

Evaluaci√≥n por Dimensiones:
‚Ä¢ Claridad en la comunicaci√≥n: ‚≠ê‚≠ê‚≠ê‚≠ê (4/5)
‚Ä¢ Profundidad en la experiencia: ‚≠ê‚≠ê‚≠ê‚≠ê (4/5)

Fortalezas:
‚Ä¢ Enfoque data-driven para la toma de decisiones
‚Ä¢ Experiencia concreta resolviendo problemas complejos
..."></textarea>
                    <button type="button" class="copy-btn" onclick="formatReport('reportA')" style="margin-top: 10px;">üé® Convertir a HTML Bonito</button>
                    <div class="auto-format-notice">
                        üí° <strong>Auto-formato:</strong> Se convertir√° autom√°ticamente cuando pegues texto plano
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="reportB">ü§ó Reporte B (Humano) - Texto Plano:</label>
                    <textarea id="reportB" class="report-textarea" placeholder="Pega aqu√≠ el texto plano del Reporte B. Se convertir√° autom√°ticamente a HTML bonito.

Ejemplo:
¬°Hola Mar√≠a!

¬°Qu√© gusto fue conocerte en la entrevista!

Resumen General:
Nos encanta ver tu pasi√≥n por el producto...

Fortalezas que nos llamaron la atenci√≥n:
Tu capacidad para tomar decisiones basadas en datos...
..."></textarea>
                    <button type="button" class="copy-btn" onclick="formatReport('reportB')" style="margin-top: 10px;">üé® Convertir a HTML Bonito</button>
                    <div class="auto-format-notice">
                        üí° <strong>Auto-formato:</strong> Se convertir√° autom√°ticamente cuando pegues texto plano
                    </div>
                </div>
                
                <button class="btn btn-primary" onclick="generateUrl()" id="generateBtn">
                    üîó Generar URL Personalizada
                </button>
                
                <button class="btn btn-secondary" onclick="clearForm()">
                    üßπ Limpiar Formulario
                </button>
                
                <div class="success-message" id="successMessage">
                    ‚úÖ ¬°URL generada exitosamente! Ve a la pesta√±a "URL Final" para copiarla.
                </div>
            </div>
            
            <div class="output-section">
                <h2 class="section-title">
                    üëÄ Preview y URL Final
                </h2>
                
                <div class="report-tabs">
                    <div class="tab active" onclick="showTab('previewA')">Preview A</div>
                    <div class="tab" onclick="showTab('previewB')">Preview B</div>
                    <div class="tab" onclick="showTab('finalUrl')">URL Final</div>
                </div>
                
                <div class="report-content active" id="previewA">
                    <em>El preview del Reporte A aparecer√° aqu√≠...</em>
                </div>
                
                <div class="report-content" id="previewB">
                    <em>El preview del Reporte B aparecer√° aqu√≠...</em>
                </div>
                
                <div class="report-content" id="finalUrl">
                    <h3>üîó URL Personalizada:</h3>
                    <div id="urlResult">
                        <em>La URL se generar√° despu√©s de completar los campos...</em>
                    </div>
                    
                    <h3>üìß Template de Email:</h3>
                    <div id="emailTemplate" class="email-template">
                        <em>El template se generar√° autom√°ticamente...</em>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // Auto-guardar la URL base
        document.getElementById('baseUrl').addEventListener('change', function() {
            localStorage.setItem('seedsBaseUrl', this.value);
        });
        
        // Cargar URL base guardada
        document.addEventListener('DOMContentLoaded', function() {
            const savedBaseUrl = localStorage.getItem('seedsBaseUrl');
            if (savedBaseUrl) {
                document.getElementById('baseUrl').value = savedBaseUrl;
            }
        });
        
        // Auto-preview en tiempo real
        document.getElementById('reportA').addEventListener('input', updatePreview);
        document.getElementById('reportB').addEventListener('input', updatePreview);
        
        // Auto-formatear cuando se pega contenido
        document.getElementById('reportA').addEventListener('paste', function() {
            setTimeout(() => {
                if (this.value.trim() && !this.value.includes('<h3>')) {
                    formatReport('reportA');
                }
            }, 100);
        });
        
        document.getElementById('reportB').addEventListener('paste', function() {
            setTimeout(() => {
                if (this.value.trim() && !this.value.includes('<h3>')) {
                    formatReport('reportB');
                }
            }, 100);
        });
        function formatReport(textareaId) {
            const textarea = document.getElementById(textareaId);
            const plainText = textarea.value.trim();
            
            if (!plainText) {
                alert('Por favor, pega primero el texto del reporte.');
                return;
            }
            
            // Convertir texto plano a HTML estructurado
            const htmlContent = convertPlainTextToHTML(plainText);
            
            // Actualizar el textarea con el HTML formateado
            textarea.value = htmlContent;
            
            // Actualizar el preview
            updatePreview();
            
            // Feedback visual
            const button = event.target;
            const originalText = button.textContent;
            button.textContent = '‚úÖ Convertido!';
            button.style.background = '#27ae60';
            
            setTimeout(() => {
                button.textContent = originalText;
                button.style.background = '#27ae60';
            }, 2000);
        }
        
        function convertPlainTextToHTML(text) {
            // Limpiar el texto
            text = text.trim();
            
            // Dividir en l√≠neas
            const lines = text.split('\n').map(line => line.trim()).filter(line => line.length > 0);
            
            let html = '';
            let isInList = false;
            
            for (let i = 0; i < lines.length; i++) {
                const line = lines[i];
                const nextLine = lines[i + 1] || '';
                
                // Detectar t√≠tulos (l√≠neas que terminan con : o son secciones conocidas)
                if (isTitle(line)) {
                    // Cerrar lista si estaba abierta
                    if (isInList) {
                        html += '</ul>\n';
                        isInList = false;
                    }
                    
                    // Determinar el nivel del t√≠tulo
                    if (line.toLowerCase().includes('hola ') || line.toLowerCase().includes('¬°hola')) {
                        html += `<h3>${line}</h3>\n`;
                    } else {
                        html += `<h3>${line}</h3>\n`;
                    }
                }
                // Detectar elementos de lista (empiezan con ‚Ä¢ o -)
                else if (line.startsWith('‚Ä¢') || line.startsWith('-') || line.startsWith('*')) {
                    if (!isInList) {
                        html += '<ul>\n';
                        isInList = true;
                    }
                    
                    let listItem = line.substring(1).trim();
                    
                    // Detectar texto en negrita (palabras seguidas de :)
                    listItem = listItem.replace(/^([^:]+:)/, '<strong>$1</strong>');
                    
                    // Detectar estrellas y convertirlas
                    listItem = formatStars(listItem);
                    
                    html += `<li>${listItem}</li>\n`;
                }
                // L√≠nea normal de p√°rrafo
                else {
                    // Cerrar lista si estaba abierta
                    if (isInList) {
                        html += '</ul>\n';
                        isInList = false;
                    }
                    
                    // Formatear estrellas en p√°rrafos tambi√©n
                    let formattedLine = formatStars(line);
                    
                    // Detectar texto en negrita (palabras seguidas de :)
                    formattedLine = formattedLine.replace(/^([^:]+:)/, '<strong>$1</strong>');
                    formattedLine = formattedLine.replace(/\*\*([^*]+)\*\*/g, '<strong>$1</strong>');
                    
                    html += `<p>${formattedLine}</p>\n`;
                }
            }
            
            // Cerrar lista si qued√≥ abierta
            if (isInList) {
                html += '</ul>\n';
            }
            
            return html.trim();
        }
        
        function isTitle(line) {
            // Lista de patrones que indican que es un t√≠tulo
            const titlePatterns = [
                /^Hola /i,
                /^¬°Hola /i,
                /Resumen General:?$/i,
                /Evaluaci√≥n por Dimensiones:?$/i,
                /Fortalezas:?$/i,
                /Oportunidades de Mejora:?$/i,
                /Sugerencias:?$/i,
                /√Åreas donde pod√©s seguir creciendo:?$/i,
                /Fortalezas que nos llamaron la atenci√≥n:?$/i,
                /Algunas ideas para seguir desarroll√°ndote:?$/i,
                /:$/,  // Cualquier l√≠nea que termine en :
            ];
            
            return titlePatterns.some(pattern => pattern.test(line.trim()));
        }
        
        function formatStars(text) {
            // Convertir diferentes formatos de estrellas a emoji
            text = text.replace(/‚≠ê/g, '<span class="stars">‚≠ê</span>');
            text = text.replace(/\*(?=\s|$)/g, '<span class="stars">‚≠ê</span>');
            text = text.replace(/‚òÖ/g, '<span class="stars">‚≠ê</span>');
            
            // Buscar patrones como (4/5) y agregar estrellas
            text = text.replace(/\((\d)\/5\)/, function(match, rating) {
                const stars = '‚≠ê'.repeat(parseInt(rating));
                return `<span class="stars">${stars}</span> (${rating}/5)`;
            });
            
            return text;
        }
        
        function updatePreview() {
            const reportA = document.getElementById('reportA').value.trim();
            const reportB = document.getElementById('reportB').value.trim();
            
            document.getElementById('previewA').innerHTML = reportA || '<em>El preview del Reporte A aparecer√° aqu√≠...</em>';
            document.getElementById('previewB').innerHTML = reportB || '<em>El preview del Reporte B aparecer√° aqu√≠...</em>';
        }
        
        function showTab(tabName) {
            document.querySelectorAll('.report-content').forEach(content => {
                content.classList.remove('active');
            });
            
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
        }
        
        function copyPrompt() {
            const promptText = document.getElementById('promptText').textContent;
            copyToClipboard(promptText);
        }
        
        function generateUrl() {
            const baseUrl = document.getElementById('baseUrl').value.trim();
            const candidateName = document.getElementById('candidateName').value.trim();
            const reportA = document.getElementById('reportA').value.trim();
            const reportB = document.getElementById('reportB').value.trim();
            
            if (!baseUrl) {
                alert('Por favor, configura la URL base.');
                return;
            }
            
            if (!candidateName) {
                alert('Por favor, ingresa el nombre del candidato.');
                return;
            }
            
            if (!reportA || !reportB) {
                alert('Por favor, completa ambos reportes (A y B).');
                return;
            }
            
            // Comprimir y codificar los reportes
            const compressedReportA = compressAndEncode(reportA);
            const compressedReportB = compressAndEncode(reportB);
            
            // Construir la URL
            const params = new URLSearchParams();
            params.append('candidate', candidateName);
            params.append('reportA', compressedReportA);
            params.append('reportB', compressedReportB);
            
            const finalUrl = baseUrl + '?' + params.toString();
            
            // Verificar el tama√±o de la URL
            if (finalUrl.length > 2000) {
                // Si a√∫n es muy larga, usar localStorage como respaldo
                const reportId = generateReportId();
                storeReportsLocally(reportId, reportA, reportB);
                
                const shortParams = new URLSearchParams();
                shortParams.append('candidate', candidateName);
                shortParams.append('id', reportId);
                
                const shortUrl = baseUrl + '?' + shortParams.toString();
                
                showUrlWithWarning(shortUrl, finalUrl, true);
            } else {
                showUrlWithWarning(finalUrl, null, false);
            }
        }
        
        function compressAndEncode(text) {
            // Comprimir eliminando espacios extra y optimizando el HTML
            let compressed = text
                .replace(/\s+/g, ' ')  // M√∫ltiples espacios a uno solo
                .replace(/>\s+</g, '><')  // Eliminar espacios entre tags
                .trim();
            
            // Codificar en Base64
            return btoa(encodeURIComponent(compressed));
        }
        
        function generateReportId() {
            return 'report_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
        }
        
        function storeReportsLocally(id, reportA, reportB) {
            const reportData = {
                reportA: reportA,
                reportB: reportB,
                timestamp: Date.now()
            };
            localStorage.setItem(id, JSON.stringify(reportData));
            
            // Limpiar reportes antiguos (m√°s de 7 d√≠as)
            cleanOldReports();
        }
        
        function cleanOldReports() {
            const sevenDaysAgo = Date.now() - (7 * 24 * 60 * 60 * 1000);
            
            for (let i = localStorage.length - 1; i >= 0; i--) {
                const key = localStorage.key(i);
                if (key && key.startsWith('report_')) {
                    try {
                        const data = JSON.parse(localStorage.getItem(key));
                        if (data.timestamp < sevenDaysAgo) {
                            localStorage.removeItem(key);
                        }
                    } catch (e) {
                        localStorage.removeItem(key);
                    }
                }
            }
        }
        
        function showUrlWithWarning(url, fullUrl, usingLocalStorage) {
            let urlHtml = `
                <div class="final-url">${url}</div>
                <button class="copy-btn" onclick="copyToClipboard('${url.replace(/'/g, "\\'")}')">üìã Copiar URL</button>
                <button class="copy-btn" onclick="openInNewTab('${url.replace(/'/g, "\\'")}')">üîç Abrir Preview</button>
                <button class="copy-btn" onclick="testUrl('${url.replace(/'/g, "\\'")}')">üß™ Probar URL</button>
            `;
            
            if (usingLocalStorage) {
                urlHtml += `
                    <div style="background: #fff3cd; color: #856404; padding: 15px; border-radius: 8px; margin-top: 15px; border-left: 4px solid #ffc107;">
                        <strong>‚ö†Ô∏è URL Optimizada:</strong> Los reportes eran muy largos para la URL, as√≠ que usamos una versi√≥n optimizada. 
                        La URL funcionar√° perfectamente, pero los datos se almacenan temporalmente en el navegador del candidato.
                        <br><br>
                        <strong>Duraci√≥n:</strong> 7 d√≠as | <strong>Privacidad:</strong> Solo visible en este navegador
                    </div>
                `;
            }
            
            document.getElementById('urlResult').innerHTML = urlHtml;
            
            // Generar template de email
            const emailTemplate = `Hola ${candidateName},

¬°Gracias por tu tiempo durante la entrevista! 

Hemos preparado un reporte de feedback personalizado para ayudarte en tu desarrollo profesional. Para acceder a √©l, simplemente haz clic en el siguiente enlace:

${finalUrl}

En la p√°gina encontrar√°s dos versiones diferentes de tu reporte de feedback. Nos encantar√≠a conocer tu opini√≥n sobre cu√°l prefieres y por qu√©, ya que esto nos ayuda a mejorar continuamente la experiencia para futuros candidatos.

¬°Esperamos que el feedback te sea √∫til!

Saludos,
Equipo Seeds üå±`;
            
            document.getElementById('emailTemplate').innerHTML = emailTemplate + `
                <br><br>
                <button class="copy-btn" onclick="copyToClipboard(\`${emailTemplate.replace(/`/g, '\\`')}\`)">üìß Copiar Email</button>
            `;
            
            // Mostrar mensaje de √©xito y cambiar a la pesta√±a URL
            document.getElementById('successMessage').style.display = 'block';
            setTimeout(() => {
                document.getElementById('successMessage').style.display = 'none';
            }, 3000);
            
            // Auto-cambiar a la pesta√±a URL Final
            showTab('finalUrl');
            document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.tab')[2].classList.add('active');
        }
        
        function copyToClipboard(text) {
            navigator.clipboard.writeText(text).then(() => {
                // Mostrar feedback visual
                const originalText = event.target.textContent;
                event.target.textContent = '‚úÖ Copiado!';
                event.target.style.background = '#27ae60';
                
                setTimeout(() => {
                    event.target.textContent = originalText;
                    event.target.style.background = '';
                }, 2000);
            }).catch(() => {
                // Fallback para navegadores m√°s antiguos
                const textArea = document.createElement('textarea');
                textArea.value = text;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                alert('¬°Copiado al portapapeles!');
            });
        }
        
        function openInNewTab(url) {
            window.open(url, '_blank');
        }
        
        function testUrl(url) {
            // Abrir en una nueva ventana peque√±a para testing
            const testWindow = window.open(url, 'test', 'width=800,height=600,scrollbars=yes,resizable=yes');
            if (testWindow) {
                testWindow.focus();
            } else {
                alert('Por favor, permite pop-ups para esta funci√≥n de testing.');
            }
        }
        
        function clearForm() {
            if (confirm('¬øEst√°s seguro de que quieres limpiar todo el formulario?')) {
                document.getElementById('candidateName').value = '';
                document.getElementById('reportA').value = '';
                document.getElementById('reportB').value = '';
                document.getElementById('previewA').innerHTML = '<em>El preview del Reporte A aparecer√° aqu√≠...</em>';
                document.getElementById('previewB').innerHTML = '<em>El preview del Reporte B aparecer√° aqu√≠...</em>';
                document.getElementById('urlResult').innerHTML = '<em>La URL se generar√° despu√©s de completar los campos...</em>';
                document.getElementById('emailTemplate').innerHTML = '<em>El template se generar√° autom√°ticamente...</em>';
                
                // Volver a la primera pesta√±a
                showTab('previewA');
                document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
                document.querySelectorAll('.tab')[0].classList.add('active');
            }
        }
        
        // Atajo de teclado para generar (Ctrl+Enter)
        document.addEventListener('keydown', function(e) {
            if ((e.ctrlKey || e.metaKey) && e.key === 'Enter') {
                e.preventDefault();
                generateUrl();
            }
        });
        
        // Auto-resize de textareas
        document.querySelectorAll('textarea').forEach(textarea => {
            textarea.addEventListener('input', function() {
                this.style.height = 'auto';
                this.style.height = Math.min(this.scrollHeight, 400) + 'px';
            });
        });
    </script>
</body>
</html>